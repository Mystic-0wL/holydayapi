<!doctype html>
<html lang="es">
  <head>
  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Holyday REST API: Content count</title>


    <!-- Bootstrap core CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css">

  </head>
  <body>

<main role="main">

  <div class="jumbotron">
    <div class="container">
      <h1 class="display-3">Holyday API: Status count</h1>
      <p>Cantidad de festivos incorporados en el sistema (en el a√±o actual)</p>
    </div>
  </div>

  <div class="container">
    <h3>Country</h3>
    <table id="country_table">
      <thead><tr>
        <td>Count</td><td>Code</td><td>Name</td>
      </tr></thead>
    </table>

    <h3>Region</h3>
    <table id="region_table">
      <thead><tr>
        <td>Count</td><td>Code</td><td>Name</td>
      </tr></thead>
    </table>

    <h3>City</h3>
    <table id="city_table">
      <thead><tr>
        <td>Count</td><td>Code</td><td>Name</td>
      </tr></thead>
    </table>
  </div> <!-- /container -->

</main>

<footer class="container">
  <p>Project home: <a href="https://github.com/jdlopez/holydayapi">holydayapi</a></p>
</footer>

<!--<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>-->
<script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js"></script>
  <script>
    $(document).ready(function() {
    var data, jqxhr = $.ajax('/info')
            .done(function () {
              data = JSON.parse(jqxhr.responseText);

              $("#country_table").dataTable({
                "data": data.country,
                columns: [
                  { data: 'count' },
                  { data: 'name' },
                  { data: 'code' }
                ]
              });
              $("#region_table").dataTable({
                "data": data.region,
                columns: [
                  { data: 'count' },
                  { data: 'name' },
                  { data: 'code' }
                ]
              });
              $("#city_table").dataTable({
                "data": data.city,
                columns: [
                  { data: 'count' },
                  { data: 'name' },
                  { data: 'code' }
                  ]
              });
            })
            .fail(function (jqXHR, exception) {
              console.log(jqXHR.status + " " + exception + "\nresponseText: " + jqXHR.responseText)
            });
    } );
  </script>
</html>
